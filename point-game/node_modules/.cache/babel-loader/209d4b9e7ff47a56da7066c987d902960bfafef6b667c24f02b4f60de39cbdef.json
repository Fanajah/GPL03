{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\Projects\\\\GPL3\\\\point-game\\\\src\\\\Page.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Stage, Layer, Line, Circle } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Page = ({\n  numRows,\n  numCols,\n  plateau,\n  setPlateau\n}) => {\n  _s();\n  const [currentPlayer, setCurrentPlayer] = useState(1);\n  let totalPlayers = 2;\n  const [marginTop, setMarginTop] = useState(100);\n  const [marginBottom, setMarginBottom] = useState(60);\n  const [marginLeft, setMarginLeft] = useState(120);\n  const [marginRight, setMarginRight] = useState(40);\n  const [radius, setRadius] = useState(5);\n  const [height, setHeight] = useState(450);\n  let b = height / numRows;\n  const [scale, setScale] = useState(b);\n  const [width, setWidth] = useState(numCols * scale);\n\n  //let s = a > b ? Math.floor(a) : Math.floor(a); // �chelle pour les graduations\n\n  //setWidth(marginLeft + numCols * scale + marginRight);\n  const [echelle, setEchelle] = useState(1.1); // Nouvelle variable echelle � 1 par d�faut\n  const [scrolling, setScrolling] = useState(false); // �tat pour suivre si le d�filement est actif\n\n  // Gestionnaire d'�v�nements pour la molette\n  const handleWheel = event => {\n    event.evt.preventDefault(); // Utiliser l'�v�nement natif pour pr�venir le comportement par d�faut\n    const molette = event.evt.deltaY;\n    console.log(\"molette\", molette, \" \", molette < 0);\n    const newEchelle = molette < 0 ? 1.1 : 1 / 1.1;\n    setEchelle(newEchelle);\n    console.log(\"cell\", scale, \"radius\", radius, \"echelle\", echelle, \"newE\", newEchelle);\n    if (scale > 20 || molette < 0) {\n      const newScale = Math.round(scale * echelle);\n      setScale(newScale);\n      // Ajuster les marges en fonction de l'�chelle\n      setMarginTop(prevMarginTop => Math.round(prevMarginTop * newEchelle));\n      setMarginBottom(prevMarginBottom => Math.round(prevMarginBottom * newEchelle));\n      setMarginLeft(prevMarginLeft => Math.round(prevMarginLeft * newEchelle));\n      setMarginRight(prevMarginRight => Math.round(prevMarginRight * newEchelle));\n      setRadius(prevRadius => prevRadius * newEchelle);\n      setWidth(numCols * newScale);\n      setHeight(numRows * newScale);\n    }\n    // Indiquer que le d�filement est actif\n    setScrolling(true);\n    console.log(marginTop, \"-\", marginRight, \"-\", marginBottom, \"-\", marginLeft);\n    console.log(\"width\", width, \" height\", height);\n  };\n  //scale = 50;\n\n  // Tableaux pour stocker les points de chaque joueur avec leur couleur\n  const [playerPoints, setPlayerPoints] = useState(Array.from({\n    length: totalPlayers\n  }, () => []));\n\n  // Initialisation des circuits pour chaque joueur\n  const [playersCircuitsList, setPlayersCircuitsList] = useState(Array(totalPlayers).fill(null).map(() => []));\n  const drawClosedCircuit = () => {\n    let lines = [];\n    for (let playerIndex = 0; playerIndex < totalPlayers; playerIndex++) {\n      let circuits = playersCircuitsList[playerIndex];\n      let color = playerIndex === 0 ? \"red\" : playerIndex === 1 ? \"blue\" : playerIndex === 2 ? 'green' : 'black';\n      for (let circuitIndex = 0; circuitIndex < circuits.length; circuitIndex++) {\n        const circuit = circuits[circuitIndex];\n        const points = circuit.flatMap(point => [marginLeft + (point.x - 1) * scale, marginTop + (point.y - 1) * scale]);\n        lines.push( /*#__PURE__*/_jsxDEV(Line, {\n          points: points,\n          stroke: color,\n          strokeWidth: radius * 2 / 5,\n          closed: true // Fermer le circuit\n          ,\n          lineJoin: \"round\",\n          lineCap: \"round\"\n        }, `player-${playerIndex}-circuit-${circuitIndex}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this));\n      }\n    }\n    return lines;\n  };\n  const renderHorizontalLines = () => {\n    const lines = [];\n    for (let i = 0; i <= numRows; i++) {\n      lines.push( /*#__PURE__*/_jsxDEV(Line, {\n        points: [0, marginTop + i * scale, marginLeft + width + marginRight, marginTop + i * scale],\n        stroke: \"#ddd\"\n      }, `hline${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this));\n    }\n    return lines;\n  };\n  const renderVerticalLines = () => {\n    const lines = [];\n    for (let i = 0; i <= numCols; i++) {\n      lines.push( /*#__PURE__*/_jsxDEV(Line, {\n        points: [marginLeft + i * scale, 0, marginLeft + i * scale, marginTop + height + marginBottom],\n        stroke: \"#ddd\"\n      }, `vline${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this));\n    }\n    return lines;\n  };\n\n  // Calculer l'intersection la plus proche\n  const getClosestIntersection = (x, y) => {\n    const closestX = Math.round((x - marginLeft) / scale) * scale;\n    const closestY = Math.round((y - marginTop) / scale) * scale;\n    return {\n      x: closestX + marginLeft,\n      y: closestY + marginTop\n    };\n  };\n  const isValidPoint = (x, y) => {\n    return x > marginLeft - 20 && x < marginLeft + width + 20 && y > marginTop - 20 && y < marginTop + height + 20;\n  };\n  const [mousePos, setMousePos] = useState({\n    x: 0,\n    y: 0\n  }); // �tat pour la position de la souris\n\n  // G�rer le mouvement de la souris \n  const handleMouseMove = event => {\n    const {\n      x,\n      y\n    } = event.target.getStage().getPointerPosition();\n    const {\n      x: closestX,\n      y: closestY\n    } = getClosestIntersection(x, y);\n    setScrolling(false);\n    if (isValidPoint(x, y)) {\n      setMousePos({\n        x: closestX,\n        y: closestY\n      });\n    }\n  };\n\n  // ************************************************************************************************************* //\n  // *********** ATO NO MIASA LE GAME **************************************************************************** //\n  // ************************************************************************************************************* //\n  const handleClick = event => {\n    const {\n      x,\n      y\n    } = event.target.getStage().getPointerPosition();\n    const {\n      x: closestX,\n      y: closestY\n    } = getClosestIntersection(x, y);\n    const newX = Math.round((x - marginLeft) / scale) + 1; // Calcul de la colonne la plus proche\n    const newY = Math.round((y - marginTop) / scale) + 1; // Calcul de la ligne la plus proche\n\n    //console.log(\"ix\", newX, \" iy\", newY);\n\n    if (isValidPoint(x, y) && plateau[newY][newX] === 0) {\n      // Ajouter le point au joueur courant\n      const updatedPlayerPoints = [...playerPoints];\n      updatedPlayerPoints[currentPlayer - 1].push({\n        x: newX - 1,\n        y: newY - 1\n      });\n      setPlayerPoints(updatedPlayerPoints);\n\n      // Mettre � jour la case correspondante dans la matrice plateau\n      //const newPlateau = plateau.map((row, rowIndex) =>\n      //    row.map((value, colIndex) => (rowIndex === newY && colIndex === newX ? currentPlayer : value))\n      //);\n\n      plateau[newY][newX] = currentPlayer;\n\n      // Mettre � jour l'�tat plateau avec la nouvelle matrice\n      setPlateau(plateau);\n      //console.log(\"x\", newX, \" y\", newY);\n      //console.log(plateau, \" cp \", currentPlayer);\n\n      // Appel de la fonction avec les donn�es � envoyer\n      sendDataToServer(plateau, {\n        x: newX,\n        y: newY\n      });\n      //setCurrentPlayer(currentPlayer % totalPlayers + 1); \n    }\n  };\n  const sendDataToServer = async (plateau, dernierPoint) => {\n    try {\n      //https://localhost:44356\n      const response = await axios.put(\"http://localhost:7001/api/Game/ProcessData\", {\n        CircuitList: playersCircuitsList,\n        plateau: plateau,\n        dernierPoint: dernierPoint,\n        currentPlayer: currentPlayer\n      });\n\n      //console.log(response.data);\n      setCurrentPlayer(response.data.currentPlayer);\n      const circuitData = response.data.circuitList.map(playerCircuits => playerCircuits.map(circuit => circuit.map(point => ({\n        x: point.x,\n        y: point.y\n      }))));\n      setPlayersCircuitsList(circuitData);\n      const plateauData = response.data.plateau.map(row => row.map(cell => cell));\n\n      // Mettez � jour l'�tat avec la nouvelle structure de donn�es\n      setPlateau(plateauData);\n    } catch (error) {\n      console.error('Une erreur s\\'est produite lors de l\\'envoi des donn�es au serveur :', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Stage, {\n    width: marginLeft + width + marginRight,\n    height: marginTop + height + marginBottom,\n    onClick: handleClick,\n    onMouseMove: handleMouseMove,\n    onWheel: handleWheel,\n    children: /*#__PURE__*/_jsxDEV(Layer, {\n      children: [renderHorizontalLines(), renderVerticalLines(), drawClosedCircuit(), /*#__PURE__*/_jsxDEV(Line, {\n        points: [0, 0, marginLeft + width + marginRight, 0],\n        stroke: \"black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        points: [0, 0, 0, marginTop + height + marginBottom],\n        stroke: \"black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }, this), playerPoints.map((points, playerIndex) => points.map((point, index) => /*#__PURE__*/_jsxDEV(Circle, {\n        x: point.x * scale + marginLeft,\n        y: point.y * scale + marginTop,\n        radius: radius,\n        fill: playerIndex === 0 ? 'red' : playerIndex === 1 ? 'blue' : playerIndex === 2 ? 'green' : 'black' // Exemple de couleurs diff�rentes pour les joueurs\n      }, `${playerIndex}-${index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }, this))), !scrolling && isValidPoint(mousePos.x, mousePos.y) && /*#__PURE__*/_jsxDEV(Circle, {\n        x: mousePos.x,\n        y: mousePos.y,\n        radius: radius * 2,\n        fill: currentPlayer === 1 ? 'red' : currentPlayer === 2 ? 'blue' : currentPlayer === 3 ? 'green' : 'black',\n        opacity: 0.5 // Opacit� de 50%\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 9\n  }, this);\n};\n\n// Valeurs par d�faut pour les props\n_s(Page, \"BbOomKFCQVmvOKzbVyxWQD+hWL8=\");\n_c = Page;\nPage.defaultProps = {\n  numRows: 22,\n  numCols: 10\n};\nexport default Page;\nvar _c;\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"names":["React","useState","axios","Stage","Layer","Line","Circle","jsxDEV","_jsxDEV","Page","numRows","numCols","plateau","setPlateau","_s","currentPlayer","setCurrentPlayer","totalPlayers","marginTop","setMarginTop","marginBottom","setMarginBottom","marginLeft","setMarginLeft","marginRight","setMarginRight","radius","setRadius","height","setHeight","b","scale","setScale","width","setWidth","echelle","setEchelle","scrolling","setScrolling","handleWheel","event","evt","preventDefault","molette","deltaY","console","log","newEchelle","newScale","Math","round","prevMarginTop","prevMarginBottom","prevMarginLeft","prevMarginRight","prevRadius","playerPoints","setPlayerPoints","Array","from","length","playersCircuitsList","setPlayersCircuitsList","fill","map","drawClosedCircuit","lines","playerIndex","circuits","color","circuitIndex","circuit","points","flatMap","point","x","y","push","stroke","strokeWidth","closed","lineJoin","lineCap","fileName","_jsxFileName","lineNumber","columnNumber","renderHorizontalLines","i","renderVerticalLines","getClosestIntersection","closestX","closestY","isValidPoint","mousePos","setMousePos","handleMouseMove","target","getStage","getPointerPosition","handleClick","newX","newY","updatedPlayerPoints","sendDataToServer","dernierPoint","response","put","CircuitList","data","circuitData","circuitList","playerCircuits","plateauData","row","cell","error","onClick","onMouseMove","onWheel","children","index","opacity","_c","defaultProps","$RefreshReg$"],"sources":["C:/Users/User/Documents/Projects/GPL3/point-game/src/Page.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Stage, Layer, Line, Circle } from 'react-konva';\n\nconst Page = ({ numRows, numCols, plateau, setPlateau }) => {\n    const [currentPlayer, setCurrentPlayer] = useState(1);\n    let totalPlayers = 2;\n\n\n    const [marginTop, setMarginTop] = useState(100);\n    const [marginBottom, setMarginBottom] = useState(60);\n    const [marginLeft, setMarginLeft] = useState(120);\n    const [marginRight, setMarginRight] = useState(40);\n    const [radius, setRadius] = useState(5);\n\n\n    const [height, setHeight] = useState(450);\n    let b = height / numRows;\n    const [scale, setScale] = useState(b);\n    const [width, setWidth] = useState(numCols * scale);\n\n    //let s = a > b ? Math.floor(a) : Math.floor(a); // �chelle pour les graduations\n\n    //setWidth(marginLeft + numCols * scale + marginRight);\n    const [echelle, setEchelle] = useState(1.1); // Nouvelle variable echelle � 1 par d�faut\n    const [scrolling, setScrolling] = useState(false); // �tat pour suivre si le d�filement est actif\n\n    // Gestionnaire d'�v�nements pour la molette\n    const handleWheel = (event) => {\n        event.evt.preventDefault(); // Utiliser l'�v�nement natif pour pr�venir le comportement par d�faut\n        const molette = event.evt.deltaY;\n        console.log(\"molette\", molette, \" \", (molette < 0));\n\n        const newEchelle = (molette < 0) ? 1.1 : (1 / 1.1);\n        setEchelle(newEchelle);\n\n        console.log(\"cell\", scale, \"radius\", radius, \"echelle\", echelle, \"newE\", newEchelle);\n\n\n        if ((scale > 20) || molette < 0) {\n            const newScale = Math.round(scale * echelle);\n            setScale(newScale);\n            // Ajuster les marges en fonction de l'�chelle\r\n            setMarginTop((prevMarginTop) => Math.round(prevMarginTop * newEchelle));\r\n            setMarginBottom((prevMarginBottom) => Math.round(prevMarginBottom * newEchelle));\r\n            setMarginLeft((prevMarginLeft) => Math.round(prevMarginLeft * newEchelle));\r\n            setMarginRight((prevMarginRight) => Math.round(prevMarginRight * newEchelle));\r\n            setRadius((prevRadius) => prevRadius * newEchelle);\r\n            setWidth(numCols * newScale);\r\n            setHeight(numRows * newScale);\r\n        }\n        // Indiquer que le d�filement est actif\r\n        setScrolling(true);\r\n\n        console.log(marginTop, \"-\", marginRight, \"-\", marginBottom, \"-\", marginLeft);\n        console.log(\"width\", width, \" height\", height);\n        \n    };\n    //scale = 50;\n\n\n    // Tableaux pour stocker les points de chaque joueur avec leur couleur\n    const [playerPoints, setPlayerPoints] = useState(Array.from({ length: totalPlayers }, () => []));\n\n\n    // Initialisation des circuits pour chaque joueur\n    const [playersCircuitsList, setPlayersCircuitsList] = useState(Array(totalPlayers).fill(null).map(() => []));\n\n\n\n    const drawClosedCircuit = () => {\n        let lines = [];\n\n        for (let playerIndex = 0; playerIndex < totalPlayers; playerIndex++) {\n            let circuits = playersCircuitsList[playerIndex];\n            let color = playerIndex === 0 ? \"red\" : playerIndex === 1 ? \"blue\" : playerIndex === 2 ? 'green' : 'black'; \n\n            for (let circuitIndex = 0; circuitIndex < circuits.length; circuitIndex++) {\n                const circuit = circuits[circuitIndex];\n                const points = circuit.flatMap(point => [marginLeft + (point.x - 1) * scale, marginTop + (point.y - 1) * scale]);\n\n                lines.push(\n                    <Line\n                        key={`player-${playerIndex}-circuit-${circuitIndex}`}\n                        points={points}\n                        stroke={color}\n                        strokeWidth={radius * 2 / 5}\n                        closed={true} // Fermer le circuit\n                        lineJoin=\"round\"\n                        lineCap=\"round\"\n                    />\n                );\n            }\n        }\n\n        return lines;\n    };\n\n    const renderHorizontalLines = () => {\n        const lines = [];\n        for (let i = 0; i <= numRows; i++) {\n            lines.push(\n                <Line\n                    key={`hline${i}`}\n                    points={[0, marginTop + i * scale, marginLeft + width + marginRight, marginTop + i * scale]}\n                    stroke=\"#ddd\"\n                />\n            );\n        }\n        return lines;\n    };\n\n    const renderVerticalLines = () => {\n        const lines = [];\n        for (let i = 0; i <= numCols; i++) {\n            lines.push(\n                <Line\n                    key={`vline${i}`}\n                    points={[marginLeft + i * scale, 0, marginLeft + i * scale, marginTop + height + marginBottom]}\n                    stroke=\"#ddd\"\n                />\n            );\n        }\n        return lines;\n    };\n\n    // Calculer l'intersection la plus proche\n    const getClosestIntersection = (x, y) => {\n        const closestX = Math.round((x - marginLeft) / scale) * scale;\n        const closestY = Math.round((y - marginTop) / scale) * scale;\n\n        return { x: closestX + marginLeft, y: closestY + marginTop };\n    };\n\n    const isValidPoint = (x, y) => {\n        return ((x > marginLeft - 20) && (x < marginLeft + width + 20) && (y > marginTop - 20) && (y < marginTop + height + 20));\n    }\n\n    const [mousePos, setMousePos] = useState({ x: 0, y: 0 }); // �tat pour la position de la souris\n\n    // G�rer le mouvement de la souris \n    const handleMouseMove = (event) => {\n        const { x, y } = event.target.getStage().getPointerPosition();\n        const { x: closestX, y: closestY } = getClosestIntersection(x, y);\r\n        setScrolling(false);\r\n\n        if (isValidPoint(x, y)) {\n            setMousePos({ x: closestX, y: closestY });\n        }\n    };\n\n    // ************************************************************************************************************* //\n    // *********** ATO NO MIASA LE GAME **************************************************************************** //\n    // ************************************************************************************************************* //\n    const handleClick = (event) => {\n        const { x, y } = event.target.getStage().getPointerPosition();\n        const { x: closestX, y: closestY } = getClosestIntersection(x, y);\n\n\n        const newX = Math.round((x - marginLeft) / scale) + 1; // Calcul de la colonne la plus proche\n        const newY = Math.round((y - marginTop) / scale) + 1; // Calcul de la ligne la plus proche\n\n        //console.log(\"ix\", newX, \" iy\", newY);\n\n        if (isValidPoint(x, y) && plateau[newY][newX] === 0) {\n            // Ajouter le point au joueur courant\n            const updatedPlayerPoints = [...playerPoints];\n            updatedPlayerPoints[currentPlayer - 1].push({ x: newX - 1, y: newY - 1 });\n            setPlayerPoints(updatedPlayerPoints);\n\n\n            // Mettre � jour la case correspondante dans la matrice plateau\n            //const newPlateau = plateau.map((row, rowIndex) =>\n            //    row.map((value, colIndex) => (rowIndex === newY && colIndex === newX ? currentPlayer : value))\n            //);\n\n            plateau[newY][newX] = currentPlayer;\n\n\n            // Mettre � jour l'�tat plateau avec la nouvelle matrice\n            setPlateau(plateau);\n            //console.log(\"x\", newX, \" y\", newY);\n            //console.log(plateau, \" cp \", currentPlayer);\n\n            // Appel de la fonction avec les donn�es � envoyer\n            sendDataToServer(plateau, { x: newX, y: newY });\n            //setCurrentPlayer(currentPlayer % totalPlayers + 1); \n\n        }\n    };\n\n    const sendDataToServer = async (plateau, dernierPoint) => {\n        try {//https://localhost:44356\n            const response = await axios.put(\"http://localhost:7001/api/Game/ProcessData\", {\n                CircuitList: playersCircuitsList,\n                plateau: plateau,\n                dernierPoint: dernierPoint,\n                currentPlayer: currentPlayer\n            });\n\n            //console.log(response.data);\n            setCurrentPlayer(response.data.currentPlayer); \n\n            const circuitData = response.data.circuitList.map(playerCircuits =>\n                playerCircuits.map(circuit => circuit.map(point => ({ x: point.x, y: point.y})))\n            );\n\n            setPlayersCircuitsList(circuitData);\n\n            const plateauData = response.data.plateau.map(row =>\n                row.map(cell => cell)\n            );\n\n            // Mettez � jour l'�tat avec la nouvelle structure de donn�es\n            setPlateau(plateauData);\n\n\n        } catch (error) {\n            console.error('Une erreur s\\'est produite lors de l\\'envoi des donn�es au serveur :', error);\n        }\n    };\n\n    return (\n        <Stage\n            width={marginLeft + width + marginRight}\n            height={marginTop + height + marginBottom}\n            onClick={handleClick}\n            onMouseMove={handleMouseMove}\n            onWheel={handleWheel}\n        >\n            <Layer>\n                {renderHorizontalLines()}\n                {renderVerticalLines()}\n\n                {drawClosedCircuit()}\n\n                {/* Axes */}\n                <Line points={[0, 0, marginLeft + width + marginRight, 0]} stroke=\"black\" />\n                <Line points={[0, 0, 0, marginTop + height + marginBottom]} stroke=\"black\" />\n\n                {/* Rendu des points par joueur */}\n                {playerPoints.map((points, playerIndex) =>\n                    points.map((point, index) => (\n                        <Circle\n                            key={`${playerIndex}-${index}`}\n                            x={point.x * scale + marginLeft}\n                            y={point.y * scale + marginTop}\n                            radius={radius}\n                            fill={playerIndex === 0 ? 'red' : playerIndex === 1 ? 'blue' : playerIndex === 2 ? 'green' : 'black'} // Exemple de couleurs diff�rentes pour les joueurs\n                        />\n                    ))\n                )}\n\n                {/* Cercle qui suit la souris */}\n                {!scrolling && isValidPoint(mousePos.x, mousePos.y) && (\n                    <Circle\n                        x={mousePos.x}\n                        y={mousePos.y}\n                        radius={radius * 2}\n                        fill={currentPlayer === 1 ? 'red' : currentPlayer === 2 ? 'blue' : currentPlayer === 3 ? 'green' : 'black'}\n                        opacity={0.5} // Opacit� de 50%\n                    />\n                )}\n\n            </Layer>\n        </Stage>\n    );\n};\n\n// Valeurs par d�faut pour les props\nPage.defaultProps = {\n    numRows: 22,\n    numCols: 10,\n};\n\nexport default Page;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}