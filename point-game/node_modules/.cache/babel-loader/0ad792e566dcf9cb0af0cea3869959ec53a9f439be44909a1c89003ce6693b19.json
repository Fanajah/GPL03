{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\Projects\\\\GPL3\\\\point-game\\\\src\\\\Cahier.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Stage, Layer, Line, Circle } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cahier = ({\n  plateau,\n  setPlateau\n}) => {\n  _s();\n  const n = 10; // Taille de la grille\n  const width = 500;\n  const height = 500;\n  const xInterval = width / n;\n  const yInterval = height / n;\n  const [dernierPoint, setDernierPoint] = useState(null);\n  const createGraduations = (start, end, interval, vertical = false) => {\n    const graduations = [];\n    for (let i = start; i <= end; i += interval) {\n      if (vertical) {\n        graduations.push( /*#__PURE__*/_jsxDEV(Line, {\n          points: [i, 0, i, height],\n          stroke: \"#ccc\",\n          strokeWidth: 1\n        }, `graduation-y-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 34\n        }, this));\n      } else {\n        graduations.push( /*#__PURE__*/_jsxDEV(Line, {\n          points: [0, i, width, i],\n          stroke: \"#ccc\",\n          strokeWidth: 1\n        }, `graduation-x-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 34\n        }, this));\n      }\n    }\n    return graduations;\n  };\n  const handleClick = e => {\n    const stage = e.target.getStage();\n    const {\n      x,\n      y\n    } = stage.getPointerPosition();\n    const newX = Math.floor(x / xInterval);\n    const newY = Math.floor(y / yInterval);\n\n    // Mettre � jour la case correspondante dans la matrice plateau\n    const newPlateau = plateau.map((row, rowIndex) => row.map((value, colIndex) => rowIndex === newY && colIndex === newX ? 1 : value));\n\n    // Mettre � jour l'�tat plateau avec la nouvelle matrice\n    setPlateau(newPlateau);\n\n    // Mettre � jour l'�tat dernierPoint avec les coordonn�es du dernier point\n    setDernierPoint({\n      x: (newX + 0.5) * xInterval,\n      y: (newY + 0.5) * yInterval\n    });\n\n    //console.log(\"click \" + newX + \" \" + newY);\n\n    // Appel de la fonction avec les donn�es � envoyer\n    sendDataToServer(newPlateau, {\n      x: newX,\n      y: newY\n    });\n  };\n  const sendDataToServer = async (plateau, dernierPoint) => {\n    try {\n      console.log(\"aaaaaaaaaaaaaaa\");\n      const response = await axios.put(\"https://localhost:44356/api/Game/ProcessData\", JSON.stringify(dernierPoint),\n      // Convertir en JSON\n      {\n        headers: {\n          'Content-Type': 'application/json' // D�finir le type de contenu\n        }\n      });\n      console.log(response.data);\n      console.log(\"aaaaaaafsdfsaaa\");\n      console.log(\"--------------\", JSON.stringify(plateau), \"--------------\");\n      const response2 = await axios.put(\"https://localhost:44356/api/Game/ProcessMat\", JSON.stringify(plateau),\n      // Convertir en JSON\n      {\n        headers: {\n          'Content-Type': 'application/json' // D�finir le type de contenu\n        }\n      });\n      console.log(\"bbbbbbbbbbbbbbb\");\n      console.log(response2.data);\n    } catch (error) {\n      console.error('Une erreur s\\'est produite lors de l\\'envoi des donn�es au serveur :', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Stage, {\n    width: width,\n    height: height,\n    onClick: handleClick,\n    children: /*#__PURE__*/_jsxDEV(Layer, {\n      children: [createGraduations(0, width, xInterval), createGraduations(0, height, yInterval, true), plateau.map((row, rowIndex) => row.map((value, colIndex) => value === 1 && /*#__PURE__*/_jsxDEV(Circle, {\n        x: (colIndex + 0.5) * xInterval,\n        y: (rowIndex + 0.5) * yInterval,\n        radius: Math.min(xInterval, yInterval) / 4,\n        fill: \"red\"\n      }, `${rowIndex}-${colIndex}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 29\n      }, this))), dernierPoint && /*#__PURE__*/_jsxDEV(Circle, {\n        x: dernierPoint.x,\n        y: dernierPoint.y,\n        radius: Math.min(xInterval, yInterval) / 4,\n        fill: \"blue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n_s(Cahier, \"I8kVU8ybUWdgNJ2W2lsAk7zUpeM=\");\n_c = Cahier;\nexport default Cahier;\nvar _c;\n$RefreshReg$(_c, \"Cahier\");","map":{"version":3,"names":["React","useState","axios","Stage","Layer","Line","Circle","jsxDEV","_jsxDEV","Cahier","plateau","setPlateau","_s","n","width","height","xInterval","yInterval","dernierPoint","setDernierPoint","createGraduations","start","end","interval","vertical","graduations","i","push","points","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","handleClick","e","stage","target","getStage","x","y","getPointerPosition","newX","Math","floor","newY","newPlateau","map","row","rowIndex","value","colIndex","sendDataToServer","console","log","response","put","JSON","stringify","headers","data","response2","error","onClick","children","radius","min","fill","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/Projects/GPL3/point-game/src/Cahier.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Stage, Layer, Line, Circle } from 'react-konva';\r\n\r\nconst Cahier = ({ plateau, setPlateau }) => {\r\n    const n = 10; // Taille de la grille\r\n    const width = 500;\r\n    const height = 500;\r\n    const xInterval = width / n;\r\n    const yInterval = height / n;\r\n    const [dernierPoint, setDernierPoint] = useState(null);\r\n\r\n    const createGraduations = (start, end, interval, vertical = false) => {\r\n        const graduations = [];\r\n        for (let i = start; i <= end; i += interval) {\r\n            if (vertical) {\r\n                graduations.push(<Line key={`graduation-y-${i}`} points={[i, 0, i, height]} stroke=\"#ccc\" strokeWidth={1} />);\r\n            } else {\r\n                graduations.push(<Line key={`graduation-x-${i}`} points={[0, i, width, i]} stroke=\"#ccc\" strokeWidth={1} />);\r\n            }\r\n        }\r\n        return graduations;\r\n    };\r\n\r\n    const handleClick = (e) => {\r\n        const stage = e.target.getStage();\r\n        const { x, y } = stage.getPointerPosition();\r\n        const newX = Math.floor(x / xInterval);\r\n        const newY = Math.floor(y / yInterval);\r\n\r\n        // Mettre � jour la case correspondante dans la matrice plateau\r\n        const newPlateau = plateau.map((row, rowIndex) =>\r\n            row.map((value, colIndex) => (rowIndex === newY && colIndex === newX ? 1 : value))\r\n        );\r\n\r\n        // Mettre � jour l'�tat plateau avec la nouvelle matrice\r\n        setPlateau(newPlateau);\r\n\r\n        // Mettre � jour l'�tat dernierPoint avec les coordonn�es du dernier point\r\n        setDernierPoint({ x: (newX + 0.5) * xInterval, y: (newY + 0.5) * yInterval });\r\n\r\n        //console.log(\"click \" + newX + \" \" + newY);\r\n\r\n        // Appel de la fonction avec les donn�es � envoyer\r\n        sendDataToServer(newPlateau, { x: newX, y: newY });\r\n    };\r\n\r\n    const sendDataToServer = async (plateau, dernierPoint) => {\r\n        try {\r\n            console.log(\"aaaaaaaaaaaaaaa\");\r\n\r\n            const response = await axios.put(\"https://localhost:44356/api/Game/ProcessData\",\r\n                JSON.stringify(dernierPoint), // Convertir en JSON\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json' // D�finir le type de contenu\r\n                    }\r\n                }\r\n            );\r\n\r\n            console.log(response.data);\r\n\r\n            console.log(\"aaaaaaafsdfsaaa\");\r\n\r\n\r\n            console.log(\"--------------\", JSON.stringify(plateau), \"--------------\");\r\n\r\n            const response2 = await axios.put(\"https://localhost:44356/api/Game/ProcessMat\",\r\n                JSON.stringify(plateau), // Convertir en JSON\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json' // D�finir le type de contenu\r\n                    }\r\n                }\r\n            );\r\n            console.log(\"bbbbbbbbbbbbbbb\");\r\n            console.log(response2.data);\r\n        } catch (error) {\r\n            console.error('Une erreur s\\'est produite lors de l\\'envoi des donn�es au serveur :', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        \r\n        <Stage width={width} height={height} onClick={handleClick}>\r\n            <Layer>\r\n                {createGraduations(0, width, xInterval)}\r\n                {createGraduations(0, height, yInterval, true)}\r\n                {plateau.map((row, rowIndex) =>\r\n                    row.map((value, colIndex) => (\r\n                        value === 1 && (\r\n                            <Circle\r\n                                key={`${rowIndex}-${colIndex}`}\r\n                                x={(colIndex + 0.5) * xInterval}\r\n                                y={(rowIndex + 0.5) * yInterval}\r\n                                radius={Math.min(xInterval, yInterval) / 4}\r\n                                fill=\"red\"\r\n                            />\r\n                        )\r\n                    ))\r\n                )}\r\n                {dernierPoint && (\r\n                    <Circle\r\n                        x={dernierPoint.x}\r\n                        y={dernierPoint.y}\r\n                        radius={Math.min(xInterval, yInterval) / 4}\r\n                        fill=\"blue\"\r\n                    />\r\n                )}\r\n            </Layer>\r\n        </Stage>\r\n        \r\n    );\r\n};\r\n\r\nexport default Cahier;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}